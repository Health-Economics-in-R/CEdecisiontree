<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Build decision tree from components • CEdecisiontree</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Build decision tree from components">
<meta property="og:description" content="CEdecisiontree">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CEdecisiontree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Using_function_dispatch.html">Using function dispatch</a>
    </li>
    <li>
      <a href="../articles/other-input-formats.html">Using other input formats</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/probability-sensitivity-analysis.html">Probability Sensitivity Analysis (PSA)</a>
    </li>
    <li>
      <a href="../articles/scenario-sensitivity-analysis.html">Scenario Sensitivity Analysis</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/comparison-with-other-packages.html">Comparison with other packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Health-Economics-in-R/CEdecisiontree/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="build_tree_files/header-attrs-2.5/header-attrs.js"></script><link href="build_tree_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="build_tree_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Build decision tree from components</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Health-Economics-in-R/CEdecisiontree/blob/master/vignettes/build_tree.Rmd"><code>vignettes/build_tree.Rmd</code></a></small>
      <div class="hidden name"><code>build_tree.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>For small decision trees it is simple to directly write down the path through the tree. For larger trees this may become unwieldy and error prone. We can take advantage of some of the characteristics:</p>
<ul>
<li><p>Sections of the tree are repeated</p></li>
<li><p>A unit cost or health measure is used on multiple edges</p></li>
<li><p>Multiple trees use the same cost and health values</p></li>
<li><p>Tree structure and labelling remain the same but values assigned change e.g. in sensitivity analysis or alternative interventions</p></li>
</ul>
<p>Thus, we separate the structure of the tree, the labelling of edges and the values assigned to those labels. In this way we have flexibility in modify any one of these and better adhere to the DRY principle and the benefits it offers.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">CEdecisiontree</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></pre></div>
<p>First, we define the structure of the tree without any additional information.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">tree_struc</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="st">'1'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>,
    <span class="st">'2'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span>,
    <span class="st">'3'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>Now we can add labels and values. Define the set of cost, health values and probabilities, independent of the tree.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">label_cost</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="st">"vaccinate"</span> <span class="op">=</span> <span class="fl">10</span>,
    <span class="st">"disease"</span> <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>

<span class="va">label_probs</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="st">"vaccinate"</span> <span class="op">=</span> <span class="fl">0.7</span>,
    <span class="st">"vacc_disease"</span> <span class="op">=</span> <span class="fl">0.1</span>,
    <span class="st">"disease"</span> <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span>

<span class="va">label_health</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="st">"disease"</span> <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></pre></div>
<p>Next, assign labels to particular branches.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">cost_label_branch</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind.data.frame</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"vaccinate"</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"disease"</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"disease"</span>, <span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"from"</span>, <span class="st">"to"</span><span class="op">)</span><span class="op">)</span>

<span class="va">prob_label_branch</span> <span class="op">&lt;-</span> 
    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind.data.frame</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"vaccinate"</span>, <span class="fl">1</span> , <span class="fl">2</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"vacc_disease"</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"disease"</span>, <span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"from"</span>, <span class="st">"to"</span><span class="op">)</span><span class="op">)</span>

<span class="va">health_label_branch</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind.data.frame</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"disease"</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"disease"</span>, <span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"from"</span>, <span class="st">"to"</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>Finally, we can pull it all together and create a single decision tree long format data frame.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">

<span class="va">tree_dat</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/create_ce_tree_long_df.html">create_ce_tree_long_df</a></span><span class="op">(</span>
    tree_list <span class="op">=</span> <span class="va">tree_struc</span>,
    label_probs <span class="op">=</span> <span class="va">label_probs</span>,
    label_costs <span class="op">=</span> <span class="va">label_cost</span>,
    label_health <span class="op">=</span> <span class="va">label_health</span>,
    pname_from_to <span class="op">=</span> <span class="va">prob_label_branch</span>,
    cname_from_to <span class="op">=</span> <span class="va">cost_label_branch</span>,
    hname_from_to <span class="op">=</span> <span class="va">health_label_branch</span><span class="op">)</span>

<span class="va">tree_dat</span>
<span class="co">#&gt;   from to name.cost cost    name.prob prob name.health health</span>
<span class="co">#&gt; 1    1  2 vaccinate   10    vaccinate  0.7        &lt;NA&gt;     NA</span>
<span class="co">#&gt; 2    1  3      &lt;NA&gt;   NA         &lt;NA&gt;  0.3        &lt;NA&gt;     NA</span>
<span class="co">#&gt; 3    2  4   disease  100 vacc_disease  0.1     disease    0.5</span>
<span class="co">#&gt; 4    2  5      &lt;NA&gt;   NA         &lt;NA&gt;  0.9        &lt;NA&gt;     NA</span>
<span class="co">#&gt; 5    3  6   disease  100      disease  0.9     disease    0.5</span>
<span class="co">#&gt; 6    3  7      &lt;NA&gt;   NA         &lt;NA&gt;  0.1        &lt;NA&gt;     NA</span></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nathan Green.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
